import { ListenChangeRedmineService } from './../../../_services/manager/user/listen-change-redmine.service';
import { HttpErrorResponse } from '@angular/common/http';
import { SpringSocketService } from './../../../_services/socket/spring-socket.service';
import { Component, OnInit, Input } from '@angular/core';

@Component({
  selector: 'app-socket-notify',
  templateUrl: './socket-notify.component.html',
  styleUrls: ['./socket-notify.component.css']
})
export class SocketNotifyComponent implements OnInit {
  @Input() isShowInfomation: boolean;
  @Input() isShowNotify: boolean ;
  messenger: any[]  = [] ;
  userOnline: any ;
  model: any   =  {  user: '' , messenger :  ''  };
  constructor( private springSocketService: SpringSocketService) {
   
    this.springSocketService.getAllUser().subscribe((userOnline: any) => {
      // console.log(res);
      this.userOnline = userOnline ;
  }, ( err: HttpErrorResponse ) => {
    console.log(err);
  });
  this.springSocketService.getAllMessenger().subscribe( (res: any ) => {
      this.messenger.push(res) ;
  });
   }
   sendMessenger() {
     this.springSocketService.sendMessageTo(this.model.user , this.model.messenger);
   }

  ngOnInit() {

  }

}
